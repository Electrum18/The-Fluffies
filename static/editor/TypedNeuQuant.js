var F=100;var b=256;var o=b-1;var g=4;var j=16;var e=1<<j;var k=10;var r=1<<k;var p=10;var q=e>>p;var x=e<<k-p;var a=b>>3;var z=6;var v=1<<z;var B=a*v;var C=30;var f=10;var D=1<<f;var i;var n=8;var E=1<<n;var t=f+n;var G=1<<t;var H=499;var J=491;var K=487;var L=503;var N=3*L;function u(w,y){var l;var c;var s;var A;var M;function r(){l=[];c=new Int32Array(256);s=new Int32Array(b);A=new Int32Array(b);M=new Int32Array(b>>3);var r,a;for(r=0;r<b;r++){a=(r<<g+8)/b;l[r]=new Float64Array([a,a,a,0]);A[r]=e/b;s[r]=0}}function a(){for(var r=0;r<b;r++){l[r][0]>>=g;l[r][1]>>=g;l[r][2]>>=g;l[r][3]=r}}function I(r,a,v,f,i){l[a][0]-=r*(l[a][0]-v)/D;l[a][1]-=r*(l[a][1]-f)/D;l[a][2]-=r*(l[a][2]-i)/D}function d(r,a,v,f,i){var n=Math.abs(a-r);var t=Math.min(a+r,b);var e=a+1;var o=a-1;var u=1;var c,h;while(e<t||o>n){h=M[u++];if(e<t){c=l[e++];c[0]-=h*(c[0]-v)/G;c[1]-=h*(c[1]-f)/G;c[2]-=h*(c[2]-i)/G}if(o>n){c=l[o--];c[0]-=h*(c[0]-v)/G;c[1]-=h*(c[1]-f)/G;c[2]-=h*(c[2]-i)/G}}}function m(r,a,v){var f=~(1<<31);var i=f;var n=-1;var t=n;var e,o,u,c,h;for(e=0;e<b;e++){o=l[e];u=Math.abs(o[0]-r)+Math.abs(o[1]-a)+Math.abs(o[2]-v);if(u<f){f=u;n=e}c=u-(s[e]>>j-g);if(c<i){i=c;t=e}h=A[e]>>p;A[e]-=h;s[e]+=h<<k}A[n]+=q;s[n]-=x;return t}function v(){var r,a,v,f,i,n,t=0,e=0;for(r=0;r<b;r++){v=l[r];i=r;n=v[1];for(a=r+1;a<b;a++){f=l[a];if(f[1]<n){i=a;n=f[1]}}f=l[i];if(r!=i){a=f[0];f[0]=v[0];v[0]=a;a=f[1];f[1]=v[1];v[1]=a;a=f[2];f[2]=v[2];v[2]=a;a=f[3];f[3]=v[3];v[3]=a}if(n!=t){c[t]=e+r>>1;for(a=t+1;a<n;a++)c[a]=r;t=n;e=r}}c[t]=e+o>>1;for(a=t+1;a<256;a++)c[a]=o}function f(r,a,v){var f,i,n;var t=1e3;var e=-1;var o=c[a];var u=o-1;while(o<b||u>=0){if(o<b){i=l[o];n=i[1]-a;if(n>=t)o=b;else{o++;if(n<0)n=-n;f=i[0]-r;if(f<0)f=-f;n+=f;if(n<t){f=i[2]-v;if(f<0)f=-f;n+=f;if(n<t){t=n;e=i[3]}}}}if(u>=0){i=l[u];n=a-i[1];if(n>=t)u=-1;else{u--;if(n<0)n=-n;f=i[0]-r;if(f<0)f=-f;n+=f;if(n<t){f=i[2]-v;if(f<0)f=-f;n+=f;if(n<t){t=n;e=i[3]}}}}}return e}function i(){var r;var a=w.length;var v=30+(y-1)/3;var f=a/(3*y);var i=~~(f/F);var n=D;var t=B;var e=t>>z;if(e<=1)e=0;for(r=0;r<e;r++)M[r]=n*((e*e-r*r)*E/(e*e));var o;if(a<N){y=1;o=3}else if(a%H!==0){o=3*H}else if(a%J!==0){o=3*J}else if(a%K!==0){o=3*K}else{o=3*L}var u,c,h,l;var s=0;r=0;while(r<f){u=(w[s]&255)<<g;c=(w[s+1]&255)<<g;h=(w[s+2]&255)<<g;l=m(u,c,h);I(n,l,u,c,h);if(e!==0)d(e,l,u,c,h);s+=o;if(s>=a)s-=a;r++;if(i===0)i=1;if(r%i===0){n-=n/v;t-=t/C;e=t>>z;if(e<=1)e=0;for(l=0;l<e;l++)M[l]=n*((e*e-l*l)*E/(e*e))}}}function n(){r();i();a();v()}this.v=n;function t(){var r=[];var a=[];for(var v=0;v<b;v++)a[l[v][3]]=v;var f=0;for(var i=0;i<b;i++){var n=a[i];r[f++]=l[n][0];r[f++]=l[n][1];r[f++]=l[n][2]}return r}this.i=t;this.t=f}module.o=u;